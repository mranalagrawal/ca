query getProducts(
  $lang: LanguageCode!
  $first: Int = 10,
  $reverse: Boolean = false,
  $query: String = "tag:undefined"
) @inContext(language: $lang) {
  products(first: $first, reverse: $reverse, query: $query) {
    nodes {
      availableForSale
      descriptionHtml
      handle
      id
      featuredImage { altText, height, url, width }
      seo { description, title }
      tags
      title
      vendor
      totalInventory
      details: metafield(namespace: "custom", key: "details") {
        value
      }
      breadcrumbs: metafield(namespace: "custom", key: "breadcrumbs") {
        value
      }
      variants(first: 1) {
        nodes {
          id
          compareAtPriceV2 { amount, currencyCode }
          price { amount, currencyCode }
          quantityAvailable
          sku
        }
      }
    }
  }
}

